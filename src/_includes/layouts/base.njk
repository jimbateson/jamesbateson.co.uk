<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="color-scheme" content="dark light">

	<link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ site.url }}/feed.xml" />

	<meta name="theme-color" content="#4b87bd">
	<link rel="icon" href="/images/favicons/favicon.svg">
	<link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#4b87bd">
	<link rel="apple-touch-icon" href="/images/favicons/apple-touch-icon.png">
	<link rel="manifest" href="/images/favicons/manifest.json">

	<link rel="preload" as="font" type="font/woff2" href="/fonts/ministry/ministry-light.woff2" crossorigin/>
	<link rel="preload" as="font" type="font/woff2" href="/fonts/ministry/ministry-med.woff2" crossorigin/>
	<link rel="preload" as="font" type="font/woff2" href="/fonts/ministry/ministry-bold.woff2" crossorigin/>
	<link rel="preload" as="font" type="font/woff2" href="/fonts/ministry/ministry-xbold.woff2" crossorigin/>

	{% include "partials/global/meta-info.njk" %}
	<style>{% include "assets/css/global.css" %}</style>

	{% block head %}
	{% endblock %}

	{# Feels a bit hacky, but prevents the dreaded flash of incorrect theme #}
	<script>
		if(localStorage.getItem('user-color-scheme') !== null) {
			const theme = localStorage.getItem('user-color-scheme');
			document.documentElement.dataset.userColorScheme = theme;
		}
  </script>
</head>

<body>
	{% include "partials/global/site-head.njk" %}
	{% block content %}
	{% endblock content %}
	{% include "partials/global/site-foot.njk" %}
	{% block foot %}
	{% endblock %}

	<script type="module" src="/js/components/light-dark-toggle.js" async="" defer="defer"></script>

	<script>
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', () => {
				navigator.serviceWorker.register('/service-worker.js');
			});
		}
	</script>
</body>
</html>
